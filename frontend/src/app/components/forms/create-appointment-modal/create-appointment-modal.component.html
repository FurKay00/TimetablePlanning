<div class="modal-container">
  <div class="modal-form">
    <div class="modal-header">
      <h2>New/Update Appointment</h2>
      <button mat-icon-button class="close-btn" (click)="closeDialog()">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <div class="toggle-buttons">
      <button [class.active]="appointmentType === 'single'" (click)="toggleAppointmentType('single')">
        Single appointment
      </button>
      <button [class.active]="appointmentType === 'block'" (click)="toggleAppointmentType('block')">
        Block appointment
      </button>
    </div>

    <form [formGroup]="appointmentForm">
      <label>Type:</label>
      <div>
      <select formControlName="type">
        <option>Lecture</option>
        <option>Exam</option>
        <option>Informational</option>
      </select>
      </div>

      <label>Title:</label>
      <input type="text" formControlName="title" />

      <label>Date:</label>
      <input type="date" formControlName="date" />

      <label>Start:</label>
      <input type="time" formControlName="startTime" />

      <label>End:</label>
      <input type="time" formControlName="endTime" />

      <label>Lecturer/s:</label>
      <mat-form-field appearance="outline">
        <mat-label>Select Lecturers</mat-label>
        <mat-select formControlName="lecturers" multiple (selectionChange)="onLecturerSelection($event)">
          <mat-option *ngFor="let lecturer of lecturers" [value]="lecturer">
            {{ lecturer.fullname }}
          </mat-option>
        </mat-select>
      </mat-form-field>


      <label>Room/s:</label>
      <mat-form-field appearance="outline">
        <mat-label>Select Rooms</mat-label>
        <mat-select formControlName="rooms" multiple (selectionChange)="onRoomSelection($event)">
          <mat-option *ngFor="let room of rooms" [value]="room">
            {{ room.room_name }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div *ngIf="appointmentType === 'block'">
        <label>Max hours:</label>
        <input type="number" formControlName="maxHours" />

        <label>Frequency:</label>
        <input type="number" formControlName="frequency" />
      </div>

      <div class="submit-buttons">
        <button type="button" (click)="previewEvent()">Preview</button>
        <button type="submit" (click)="submitEvent()">Submit</button>
      </div>
    </form>
  </div>

  <div class="modal-calendar">
    <app-toolbar [currentDate]="pickedDate" (weekDaysSelected)="onWeekDaysSelected($event)" (selectedDay)="onDaySelected($event)" (selectedView)="onViewSelected($event)"></app-toolbar>
    <app-schedule [pickedDate]="pickedDate" [pickedView]="calendarView" [events]="previousEvents"></app-schedule>
  </div>
</div>
